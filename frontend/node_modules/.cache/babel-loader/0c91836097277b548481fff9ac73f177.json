{"remainingRequest":"E:\\Face_attendance_system\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\Face_attendance_system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Face_attendance_system\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Face_attendance_system\\frontend\\src\\views\\Register.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\Face_attendance_system\\frontend\\src\\views\\Register.vue","mtime":1745498666880},{"path":"E:\\Face_attendance_system\\frontend\\babel.config.js","mtime":1745498655640},{"path":"E:\\Face_attendance_system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745498657290},{"path":"E:\\Face_attendance_system\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1745498657101},{"path":"E:\\Face_attendance_system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745498657290},{"path":"E:\\Face_attendance_system\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1745498665241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVnaXN0ZXIiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aWRlb1N0cmVhbTogbnVsbCwKICAgICAgY2FwdHVyZWRJbWFnZTogbnVsbCwKICAgICAgc3R1ZGVudElkOiAiIiwKICAgICAgc3R1ZGVudE5hbWU6ICIiLAogICAgICBjbGFzc0lkOiAiIiwKICAgICAgY2xhc3NlczogW3sKICAgICAgICBpZDogImNsYXNzMSIsCiAgICAgICAgbmFtZTogIuiuoeeul+acuuenkeWtpuS4juaKgOacrzHnj60iCiAgICAgIH0sIHsKICAgICAgICBpZDogImNsYXNzMiIsCiAgICAgICAgbmFtZTogIui9r+S7tuW3peeoizHnj60iCiAgICAgIH0sIHsKICAgICAgICBpZDogImNsYXNzMyIsCiAgICAgICAgbmFtZTogIuS6uuW3peaZuuiDvTHnj60iCiAgICAgIH1dLAogICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlLAogICAgICByZWdpc3RyYXRpb25TdGF0dXM6IG51bGwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zdGFydENhbWVyYSgpOwogIH0sCiAgYmVmb3JlVW5tb3VudCgpIHsKICAgIHRoaXMuc3RvcENhbWVyYSgpOwogIH0sCiAgbWV0aG9kczogewogICAgc3RhcnRDYW1lcmEoKSB7CiAgICAgIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB7CiAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoewogICAgICAgICAgdmlkZW86IHRydWUKICAgICAgICB9KS50aGVuKHN0cmVhbSA9PiB7CiAgICAgICAgICB0aGlzLnZpZGVvU3RyZWFtID0gc3RyZWFtOwogICAgICAgICAgdGhpcy4kcmVmcy52aWRlby5zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuaXoOazleiuv+mXruaRhOWDj+WktDoiLCBlcnIpOwogICAgICAgICAgYWxlcnQoIuaXoOazleiuv+mXruaRhOWDj+WktO+8jOivt+ehruS/neaCqOeahOiuvuWkh+acieaRhOWDj+WktOW5tuS4lOW3suaOiOadg+S9v+eUqOOAgiIpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIua1j+iniOWZqOS4jeaUr+aMgWdldFVzZXJNZWRpYSIpOwogICAgICAgIGFsZXJ0KCLmgqjnmoTmtY/op4jlmajkuI3mlK/mjIHorr/pl67mkYTlg4/lpLTlip/og73vvIzor7fmm7TmjaLmtY/op4jlmajlkI7ph43or5XjgIIiKTsKICAgICAgfQogICAgfSwKICAgIHN0b3BDYW1lcmEoKSB7CiAgICAgIGlmICh0aGlzLnZpZGVvU3RyZWFtKSB7CiAgICAgICAgdGhpcy52aWRlb1N0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7CiAgICAgIH0KICAgIH0sCiAgICBjYXB0dXJlSW1hZ2UoKSB7CiAgICAgIGNvbnN0IHZpZGVvID0gdGhpcy4kcmVmcy52aWRlbzsKICAgICAgY29uc3QgY2FudmFzID0gdGhpcy4kcmVmcy5jYW52YXM7CiAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKCiAgICAgIC8vIOiuvue9rmNhbnZhc+WwuuWvuOS4juinhumikeS4gOiHtAogICAgICBjYW52YXMud2lkdGggPSB2aWRlby52aWRlb1dpZHRoOwogICAgICBjYW52YXMuaGVpZ2h0ID0gdmlkZW8udmlkZW9IZWlnaHQ7CgogICAgICAvLyDlnKhjYW52YXPkuIrnu5jliLblvZPliY3op4bpopHluKcKICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CgogICAgICAvLyDojrflj5blm77lg4/mlbDmja7lubbovazmjaLkuLpVUkwgKOmrmOi0qOmHj0pQRUcpCiAgICAgIHRoaXMuY2FwdHVyZWRJbWFnZSA9IGNhbnZhcy50b0RhdGFVUkwoImltYWdlL2pwZWciLCAwLjk1KTsKICAgICAgY29uc29sZS5sb2coIuWbvuWDj+W3suaNleiOtyIpOwogICAgICBjb25zb2xlLmxvZyhg5Zu+5YOP5pWw5o2u6ZW/5bqmOiAke3RoaXMuY2FwdHVyZWRJbWFnZS5sZW5ndGh9IOWtl+espmApOwogICAgICBjb25zb2xlLmxvZyhg5Zu+5YOP5pWw5o2u5YmN57yAOiAke3RoaXMuY2FwdHVyZWRJbWFnZS5zdWJzdHJpbmcoMCwgNTApfS4uLmApOwogICAgfSwKICAgIGNsZWFyQ2FwdHVyZWRJbWFnZSgpIHsKICAgICAgdGhpcy5jYXB0dXJlZEltYWdlID0gbnVsbDsKICAgIH0sCiAgICBhc3luYyByZWdpc3RlckZhY2UoKSB7CiAgICAgIC8vIOihqOWNlemqjOivgQogICAgICBpZiAoIXRoaXMuY2FwdHVyZWRJbWFnZSkgewogICAgICAgIHRoaXMuc2hvd1N0YXR1cygi6K+35YWI5ouN54Wn5o2V6I635Lq66IS45Zu+5YOPIiwgImVycm9yIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghdGhpcy5zdHVkZW50SWQgfHwgIXRoaXMuc3R1ZGVudE5hbWUgfHwgIXRoaXMuY2xhc3NJZCkgewogICAgICAgIHRoaXMuc2hvd1N0YXR1cygi6K+35aGr5YaZ5omA5pyJ5b+F6KaB5L+h5oGvIiwgImVycm9yIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuaXNTdWJtaXR0aW5nID0gdHJ1ZTsgLy8g5byA5aeL5o+Q5Lqk54q25oCBCiAgICAgIHRoaXMuc2hvd1N0YXR1cygi5q2j5Zyo5aSE55CG5Zu+5YOP5ZKM5L+d5a2Y5L+h5oGvLi4uIiwgInBlbmRpbmciKTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zb2xlLmxvZygi5YeG5aSH5Y+R6YCB5rOo5YaM6K+35rGCOiIpOwogICAgICAgIGNvbnNvbGUubG9nKGDlrablj7c6ICR7dGhpcy5zdHVkZW50SWR9LCDlp5PlkI06ICR7dGhpcy5zdHVkZW50TmFtZX0sIOePree6pzogJHt0aGlzLmNsYXNzSWR9YCk7CiAgICAgICAgY29uc29sZS5sb2coYOWbvuWDj+aVsOaNrumVv+W6pjogJHt0aGlzLmNhcHR1cmVkSW1hZ2UubGVuZ3RofSDlrZfnrKZgKTsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgicmVnaXN0ZXJGYWNlIiwgewogICAgICAgICAgaW1hZ2VEYXRhOiB0aGlzLmNhcHR1cmVkSW1hZ2UsCiAgICAgICAgICBzdHVkZW50SWQ6IHRoaXMuc3R1ZGVudElkLAogICAgICAgICAgc3R1ZGVudE5hbWU6IHRoaXMuc3R1ZGVudE5hbWUsCiAgICAgICAgICBjbGFzc0lkOiB0aGlzLmNsYXNzSWQKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygi5rOo5YaM6K+35rGC5ZON5bqUOiIsIHJlc3VsdCk7CiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLnNob3dTdGF0dXMoIuazqOWGjOaIkOWKn++8gSIsICJzdWNjZXNzIik7CiAgICAgICAgICAvLyDph43nva7ooajljZUKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLnN0dWRlbnRJZCA9ICIiOwogICAgICAgICAgICB0aGlzLnN0dWRlbnROYW1lID0gIiI7CiAgICAgICAgICAgIHRoaXMuY2xhc3NJZCA9ICIiOwogICAgICAgICAgICB0aGlzLmNsZWFyQ2FwdHVyZWRJbWFnZSgpOwogICAgICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvblN0YXR1cyA9IG51bGw7CiAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93U3RhdHVzKGDms6jlhozlpLHotKU6ICR7cmVzdWx0LmVycm9yIHx8ICfmnKrnn6XplJnor68nfWAsICJlcnJvciIpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCLms6jlhozov4fnqIvkuK3lj5HnlJ/plJnor686IiwgZXJyb3IpOwogICAgICAgIHRoaXMuc2hvd1N0YXR1cyhg5rOo5YaM6ZSZ6K+vOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ+acquefpemUmeivryd9YCwgImVycm9yIik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5pc1N1Ym1pdHRpbmcgPSBmYWxzZTsgLy8g57uT5p2f5o+Q5Lqk54q25oCBCiAgICAgIH0KICAgIH0sCiAgICBzaG93U3RhdHVzKG1lc3NhZ2UsIHR5cGUpIHsKICAgICAgdGhpcy5yZWdpc3RyYXRpb25TdGF0dXMgPSB7CiAgICAgICAgbWVzc2FnZSwKICAgICAgICB0eXBlCiAgICAgIH07CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["name","data","videoStream","capturedImage","studentId","studentName","classId","classes","id","isSubmitting","registrationStatus","mounted","startCamera","beforeUnmount","stopCamera","methods","navigator","mediaDevices","getUserMedia","video","then","stream","$refs","srcObject","catch","err","console","error","alert","getTracks","forEach","track","stop","captureImage","canvas","context","getContext","width","videoWidth","height","videoHeight","drawImage","toDataURL","log","length","substring","clearCapturedImage","registerFace","showStatus","result","$store","dispatch","imageData","success","setTimeout","message","type"],"sources":["src/views/Register.vue"],"sourcesContent":["<template>\r\n  <div class=\"register-page\">\r\n    <v-container>\r\n      <v-row>\r\n        <v-col cols=\"12\">\r\n          <v-card class=\"solid-card mt-3 mb-5\" elevation=\"3\">\r\n            <v-card-title class=\"text-h4 font-weight-bold primary--text py-4\">\r\n              <v-icon large color=\"primary\" class=\"mr-3\">mdi-account-plus</v-icon>\r\n              人脸注册\r\n            </v-card-title>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n      \r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"7\">\r\n          <v-card class=\"solid-card hover-card mb-4\" elevation=\"2\">\r\n            <v-card-title class=\"subtitle-1 font-weight-medium\">\r\n              <v-icon left color=\"primary\">mdi-camera</v-icon>\r\n              拍摄人脸照片\r\n            </v-card-title>\r\n            <v-card-text>\r\n              <div class=\"video-container rounded-image\">\r\n                <video ref=\"video\" width=\"640\" height=\"480\" autoplay class=\"rounded-lg\"></video>\r\n                <canvas ref=\"canvas\" width=\"640\" height=\"480\" style=\"display: none;\"></canvas>\r\n                <transition name=\"fade\">\r\n                  <div class=\"captured-container\" v-if=\"capturedImage\">\r\n                    <img :src=\"capturedImage\" alt=\"Captured Image\" class=\"captured-image rounded-lg\" />\r\n                    <v-btn fab small color=\"error\" class=\"clear-btn btn-pulse\" @click=\"clearCapturedImage\">\r\n                      <v-icon>mdi-refresh</v-icon>\r\n                    </v-btn>\r\n                  </div>\r\n                </transition>\r\n                <v-btn\r\n                  color=\"primary\"\r\n                  large\r\n                  rounded\r\n                  class=\"capture-btn btn-pulse mt-3\"\r\n                  v-if=\"!capturedImage\"\r\n                  @click=\"captureImage\"\r\n                >\r\n                  <v-icon left>mdi-camera</v-icon>\r\n                  拍照\r\n                </v-btn>\r\n              </div>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        \r\n        <v-col cols=\"12\" md=\"5\">\r\n          <v-card class=\"solid-card hover-card\" elevation=\"2\">\r\n            <v-card-title class=\"subtitle-1 font-weight-medium\">\r\n              <v-icon left color=\"primary\">mdi-account-details</v-icon>\r\n              学生信息\r\n            </v-card-title>\r\n            <v-card-text>\r\n              <div class=\"form-container\">\r\n                <v-form @submit.prevent=\"registerFace\">\r\n                  <v-text-field\r\n                    v-model=\"studentId\"\r\n                    label=\"学号\"\r\n                    prepend-icon=\"mdi-identifier\"\r\n                    outlined\r\n                    dense\r\n                    required\r\n                    class=\"mb-3\"\r\n                  ></v-text-field>\r\n                  \r\n                  <v-text-field\r\n                    v-model=\"studentName\"\r\n                    label=\"姓名\"\r\n                    prepend-icon=\"mdi-account\"\r\n                    outlined\r\n                    dense\r\n                    required\r\n                    class=\"mb-3\"\r\n                  ></v-text-field>\r\n                  \r\n                  <v-select\r\n                    v-model=\"classId\"\r\n                    :items=\"classes\"\r\n                    item-text=\"name\"\r\n                    item-value=\"id\"\r\n                    label=\"班级\"\r\n                    prepend-icon=\"mdi-account-group\"\r\n                    outlined\r\n                    dense\r\n                    required\r\n                    class=\"mb-5\"\r\n                  ></v-select>\r\n                  \r\n                  <v-btn \r\n                    type=\"submit\" \r\n                    color=\"primary\" \r\n                    block \r\n                    large\r\n                    rounded\r\n                    class=\"btn-pulse\" \r\n                    elevation=\"2\"\r\n                    :loading=\"isSubmitting\"\r\n                    :disabled=\"isSubmitting || !capturedImage || !studentId || !studentName || !classId\"\r\n                  >\r\n                    <v-icon left>mdi-content-save</v-icon>\r\n                    {{ isSubmitting ? '保存中...' : '保存注册信息' }}\r\n                  </v-btn>\r\n                  \r\n                  <transition name=\"fade\">\r\n                    <v-alert\r\n                      v-if=\"registrationStatus\"\r\n                      :type=\"registrationStatus.type === 'success' ? 'success' : \r\n                            registrationStatus.type === 'error' ? 'error' : 'info'\"\r\n                      dense\r\n                      class=\"mt-4\"\r\n                      transition=\"scale-transition\"\r\n                    >\r\n                      {{ registrationStatus.message }}\r\n                    </v-alert>\r\n                  </transition>\r\n                </v-form>\r\n              </div>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n      \r\n      <v-row class=\"mt-4\" v-if=\"capturedImage\">\r\n        <v-col cols=\"12\">\r\n          <v-card class=\"solid-card hover-card\" elevation=\"2\">\r\n            <v-card-title class=\"subtitle-1 font-weight-medium\">\r\n              <v-icon left color=\"primary\">mdi-information-outline</v-icon>\r\n              注册须知\r\n            </v-card-title>\r\n            <v-card-text>\r\n              <v-row>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <div class=\"info-item\">\r\n                    <v-icon color=\"primary\" class=\"mr-2\">mdi-check-circle</v-icon>\r\n                    <span>确保拍摄的照片光线充足，人脸清晰</span>\r\n                  </div>\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <div class=\"info-item\">\r\n                    <v-icon color=\"primary\" class=\"mr-2\">mdi-check-circle</v-icon>\r\n                    <span>请填写真实准确的个人信息</span>\r\n                  </div>\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <div class=\"info-item\">\r\n                    <v-icon color=\"warning\" class=\"mr-2\">mdi-alert-circle</v-icon>\r\n                    <span>人脸数据会安全加密存储</span>\r\n                  </div>\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <div class=\"info-item\">\r\n                    <v-icon color=\"warning\" class=\"mr-2\">mdi-alert-circle</v-icon>\r\n                    <span>注册成功后，可直接进行考勤打卡</span>\r\n                  </div>\r\n                </v-col>\r\n              </v-row>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Register\",\r\n  data() {\r\n    return {\r\n      videoStream: null,\r\n      capturedImage: null,\r\n      studentId: \"\",\r\n      studentName: \"\",\r\n      classId: \"\",\r\n      classes: [\r\n        { id: \"class1\", name: \"计算机科学与技术1班\" },\r\n        { id: \"class2\", name: \"软件工程1班\" },\r\n        { id: \"class3\", name: \"人工智能1班\" }\r\n      ],\r\n      isSubmitting: false,\r\n      registrationStatus: null\r\n    };\r\n  },\r\n  mounted() {\r\n    this.startCamera();\r\n  },\r\n  beforeUnmount() {\r\n    this.stopCamera();\r\n  },\r\n  methods: {\r\n    startCamera() {\r\n      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n        navigator.mediaDevices\r\n          .getUserMedia({ video: true })\r\n          .then(stream => {\r\n            this.videoStream = stream;\r\n            this.$refs.video.srcObject = stream;\r\n          })\r\n          .catch(err => {\r\n            console.error(\"无法访问摄像头:\", err);\r\n            alert(\"无法访问摄像头，请确保您的设备有摄像头并且已授权使用。\");\r\n          });\r\n      } else {\r\n        console.error(\"浏览器不支持getUserMedia\");\r\n        alert(\"您的浏览器不支持访问摄像头功能，请更换浏览器后重试。\");\r\n      }\r\n    },\r\n    stopCamera() {\r\n      if (this.videoStream) {\r\n        this.videoStream.getTracks().forEach(track => track.stop());\r\n      }\r\n    },\r\n    captureImage() {\r\n      const video = this.$refs.video;\r\n      const canvas = this.$refs.canvas;\r\n      const context = canvas.getContext(\"2d\");\r\n      \r\n      // 设置canvas尺寸与视频一致\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      \r\n      // 在canvas上绘制当前视频帧\r\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n      \r\n      // 获取图像数据并转换为URL (高质量JPEG)\r\n      this.capturedImage = canvas.toDataURL(\"image/jpeg\", 0.95);\r\n      \r\n      console.log(\"图像已捕获\");\r\n      console.log(`图像数据长度: ${this.capturedImage.length} 字符`);\r\n      console.log(`图像数据前缀: ${this.capturedImage.substring(0, 50)}...`);\r\n    },\r\n    clearCapturedImage() {\r\n      this.capturedImage = null;\r\n    },\r\n    async registerFace() {\r\n      // 表单验证\r\n      if (!this.capturedImage) {\r\n        this.showStatus(\"请先拍照捕获人脸图像\", \"error\");\r\n        return;\r\n      }\r\n      \r\n      if (!this.studentId || !this.studentName || !this.classId) {\r\n        this.showStatus(\"请填写所有必要信息\", \"error\");\r\n        return;\r\n      }\r\n      \r\n      this.isSubmitting = true; // 开始提交状态\r\n      this.showStatus(\"正在处理图像和保存信息...\", \"pending\");\r\n      \r\n      try {\r\n        console.log(\"准备发送注册请求:\");\r\n        console.log(`学号: ${this.studentId}, 姓名: ${this.studentName}, 班级: ${this.classId}`);\r\n        console.log(`图像数据长度: ${this.capturedImage.length} 字符`);\r\n        \r\n        const result = await this.$store.dispatch(\"registerFace\", {\r\n        imageData: this.capturedImage,\r\n        studentId: this.studentId,\r\n          studentName: this.studentName,\r\n          classId: this.classId\r\n      });\r\n      \r\n        console.log(\"注册请求响应:\", result);\r\n      \r\n      if (result.success) {\r\n          this.showStatus(\"注册成功！\", \"success\");\r\n          // 重置表单\r\n          setTimeout(() => {\r\n            this.studentId = \"\";\r\n            this.studentName = \"\";\r\n            this.classId = \"\";\r\n            this.clearCapturedImage();\r\n            this.registrationStatus = null;\r\n          }, 2000);\r\n        } else {\r\n          this.showStatus(`注册失败: ${result.error || '未知错误'}`, \"error\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"注册过程中发生错误:\", error);\r\n        this.showStatus(`注册错误: ${error.message || '未知错误'}`, \"error\");\r\n      } finally {\r\n        this.isSubmitting = false; // 结束提交状态\r\n    }\r\n  },\r\n    showStatus(message, type) {\r\n      this.registrationStatus = { message, type };\r\n  }\r\n}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.register-page {\r\n  min-height: calc(100vh - 145px);\r\n  position: relative;\r\n}\r\n\r\n.video-container {\r\n  position: relative;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n  overflow: hidden;\r\n  border-radius: 16px;\r\n  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.video-container video,\r\n.captured-image {\r\n  width: 100%;\r\n  max-height: 500px;\r\n  object-fit: cover;\r\n  border-radius: 12px;\r\n}\r\n\r\n.captured-container {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n.capture-btn {\r\n  margin: 20px auto;\r\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n}\r\n\r\n.clear-btn {\r\n  position: absolute;\r\n  top: 12px;\r\n  right: 12px;\r\n  z-index: 5;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 12px;\r\n  padding: 10px;\r\n  border-radius: 8px;\r\n  background-color: rgba(0, 0, 0, 0.03);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.info-item:hover {\r\n  background-color: rgba(0, 0, 0, 0.06);\r\n  transform: translateX(5px);\r\n}\r\n\r\n/* 动画效果 */\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n.fade-enter-from, .fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% {\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    transform: scale(1.05);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n.pulse {\r\n  animation: pulse 1.5s infinite;\r\n}\r\n\r\n@media (max-width: 600px) {\r\n  .video-container video,\r\n  .captured-image {\r\n    max-height: 350px;\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]}]}