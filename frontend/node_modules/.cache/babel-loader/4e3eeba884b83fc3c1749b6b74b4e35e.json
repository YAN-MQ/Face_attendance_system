{"remainingRequest":"E:\\内容安全\\final\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\内容安全\\final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\内容安全\\final\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\内容安全\\final\\frontend\\src\\views\\Classes.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\内容安全\\final\\frontend\\src\\views\\Classes.vue","mtime":1745382006243},{"path":"E:\\内容安全\\final\\frontend\\babel.config.js","mtime":1745384115006},{"path":"E:\\内容安全\\final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745383817393},{"path":"E:\\内容安全\\final\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1745383814346},{"path":"E:\\内容安全\\final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745383817393},{"path":"E:\\内容安全\\final\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1745383816753}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDbGFzc2VzJywKICBkYXRhOiAoKSA9PiAoewogICAgc2VhcmNoOiAnJywKICAgIGNsYXNzRGlhbG9nOiBmYWxzZSwKICAgIGRlbGV0ZURpYWxvZzogZmFsc2UsCiAgICBzZWxlY3RlZENsYXNzOiBudWxsLAogICAgaGVhZGVyczogW3sKICAgICAgdGV4dDogJ+ePree6p0lEJywKICAgICAgdmFsdWU6ICdpZCcsCiAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICB9LCB7CiAgICAgIHRleHQ6ICfnj63nuqflkI3np7AnLAogICAgICB2YWx1ZTogJ25hbWUnLAogICAgICBzb3J0YWJsZTogdHJ1ZQogICAgfSwgewogICAgICB0ZXh0OiAn5a2m55Sf5pWw6YePJywKICAgICAgdmFsdWU6ICdzdHVkZW50X2NvdW50JywKICAgICAgc29ydGFibGU6IHRydWUKICAgIH0sIHsKICAgICAgdGV4dDogJ+ePreS4u+S7uycsCiAgICAgIHZhbHVlOiAndGVhY2hlcicsCiAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICB9LCB7CiAgICAgIHRleHQ6ICfmk43kvZwnLAogICAgICB2YWx1ZTogJ2FjdGlvbnMnLAogICAgICBzb3J0YWJsZTogZmFsc2UKICAgIH1dLAogICAgZWRpdGVkSW5kZXg6IC0xLAogICAgZWRpdGVkSXRlbTogewogICAgICBpZDogJycsCiAgICAgIG5hbWU6ICcnLAogICAgICB0ZWFjaGVyOiAnJywKICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICBzdHVkZW50X2NvdW50OiAwCiAgICB9LAogICAgZGVmYXVsdEl0ZW06IHsKICAgICAgaWQ6ICcnLAogICAgICBuYW1lOiAnJywKICAgICAgdGVhY2hlcjogJycsCiAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgc3R1ZGVudF9jb3VudDogMAogICAgfSwKICAgIGlzRm9ybVZhbGlkOiBmYWxzZSwKICAgIC8vIOekuuS+i+aVsOaNriAtIOWunumZheW6lOeUqOS4reW6lOS7juWQjuerr+iOt+WPlgogICAgc2FtcGxlQ2xhc3NlczogW3sKICAgICAgaWQ6ICdjbGFzczEnLAogICAgICBuYW1lOiAn6K6h566X5py656eR5a2m5LiO5oqA5pyvMeePrScsCiAgICAgIHRlYWNoZXI6ICflvKDmlZnmjognLAogICAgICBkZXNjcmlwdGlvbjogJ+acrOenkTIwMjHnuqforqHnrpfmnLrnp5HlrabkuI7mioDmnK8x54+tJywKICAgICAgc3R1ZGVudF9jb3VudDogNDUsCiAgICAgIHN0YXRzOiB7CiAgICAgICAgbm9ybWFsOiA0MCwKICAgICAgICBsYXRlOiAzLAogICAgICAgIGFic2VudDogMgogICAgICB9CiAgICB9LCB7CiAgICAgIGlkOiAnY2xhc3MyJywKICAgICAgbmFtZTogJ+iuoeeul+acuuenkeWtpuS4juaKgOacrzLnj60nLAogICAgICB0ZWFjaGVyOiAn5p2O5pWZ5o6IJywKICAgICAgZGVzY3JpcHRpb246ICfmnKznp5EyMDIx57qn6K6h566X5py656eR5a2m5LiO5oqA5pyvMuePrScsCiAgICAgIHN0dWRlbnRfY291bnQ6IDQyLAogICAgICBzdGF0czogewogICAgICAgIG5vcm1hbDogMzgsCiAgICAgICAgbGF0ZTogMiwKICAgICAgICBhYnNlbnQ6IDIKICAgICAgfQogICAgfSwgewogICAgICBpZDogJ2NsYXNzMycsCiAgICAgIG5hbWU6ICfova/ku7blt6XnqIsx54+tJywKICAgICAgdGVhY2hlcjogJ+eOi+aVmeaOiCcsCiAgICAgIGRlc2NyaXB0aW9uOiAn5pys56eRMjAyMee6p+i9r+S7tuW3peeoizHnj60nLAogICAgICBzdHVkZW50X2NvdW50OiA0OCwKICAgICAgc3RhdHM6IHsKICAgICAgICBub3JtYWw6IDQ1LAogICAgICAgIGxhdGU6IDIsCiAgICAgICAgYWJzZW50OiAxCiAgICAgIH0KICAgIH1dCiAgfSksCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydjbGFzc0luZm8nLCAnaXNMb2FkaW5nJywgJ2Vycm9yJ10pLAogICAgZm9ybVRpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0ZWRJbmRleCA9PT0gLTEgPyAn5paw5aKe54+t57qnJyA6ICfnvJbovpHnj63nuqcnOwogICAgfSwKICAgIGNsYXNzZXMoKSB7CiAgICAgIC8vIOWunumZheW6lOeUqOS4reW6lOivpeS9v+eUqOS7juWQjuerr+iOt+WPlueahOaVsOaNrgogICAgICAvLyByZXR1cm4gdGhpcy5jbGFzc0luZm8uY2xhc3NlcyB8fCBbXQogICAgICByZXR1cm4gdGhpcy5zYW1wbGVDbGFzc2VzOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbJ2ZldGNoQ2xhc3NJbmZvJ10pLAogICAgY2FsY1BlcmNlbnRhZ2UodmFsdWUsIHRvdGFsKSB7CiAgICAgIGlmICghdmFsdWUgfHwgIXRvdGFsKSByZXR1cm4gMDsKICAgICAgcmV0dXJuICh2YWx1ZSAvIHRvdGFsICogMTAwKS50b0ZpeGVkKDEpOwogICAgfSwKICAgIHZpZXdDbGFzcyhpdGVtKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRDbGFzcyA9IGl0ZW07CiAgICB9LAogICAgb3Blbk5ld0NsYXNzRGlhbG9nKCkgewogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTE7CiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEl0ZW0pOwogICAgICB0aGlzLmNsYXNzRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBlZGl0Q2xhc3MoaXRlbSkgewogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gdGhpcy5jbGFzc2VzLmluZGV4T2YoaXRlbSk7CiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pOwogICAgICB0aGlzLmNsYXNzRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBkZWxldGVDbGFzcyhpdGVtKSB7CiAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSB0aGlzLmNsYXNzZXMuaW5kZXhPZihpdGVtKTsKICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7CiAgICAgIHRoaXMuZGVsZXRlRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBjbG9zZUNsYXNzRGlhbG9nKCkgewogICAgICB0aGlzLmNsYXNzRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRJdGVtKTsKICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTE7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVDbGFzcygpIHsKICAgICAgaWYgKHRoaXMuZWRpdGVkSW5kZXggPiAtMSkgewogICAgICAgIC8vIOabtOaWsOeOsOacieePree6pwogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jbGFzc2VzW3RoaXMuZWRpdGVkSW5kZXhdLCB0aGlzLmVkaXRlZEl0ZW0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOa3u+WKoOaWsOePree6pwogICAgICAgIHRoaXMuZWRpdGVkSXRlbS5pZCA9ICdjbGFzcycgKyAodGhpcy5jbGFzc2VzLmxlbmd0aCArIDEpOyAvLyDnroDljZXnlJ/miJBJRAogICAgICAgIHRoaXMuZWRpdGVkSXRlbS5zdHVkZW50X2NvdW50ID0gMDsgLy8g5Yid5aeL5a2m55Sf5pWw5Li6MAogICAgICAgIHRoaXMuc2FtcGxlQ2xhc3Nlcy5wdXNoKHRoaXMuZWRpdGVkSXRlbSk7CiAgICAgIH0KICAgICAgdGhpcy5jbG9zZUNsYXNzRGlhbG9nKCk7CiAgICB9LAogICAgY29uZmlybURlbGV0ZSgpIHsKICAgICAgdGhpcy5zYW1wbGVDbGFzc2VzLnNwbGljZSh0aGlzLmVkaXRlZEluZGV4LCAxKTsKICAgICAgdGhpcy5kZWxldGVEaWFsb2cgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDbGFzcyAmJiB0aGlzLnNlbGVjdGVkQ2xhc3MuaWQgPT09IHRoaXMuZWRpdGVkSXRlbS5pZCkgewogICAgICAgIHRoaXMuc2VsZWN0ZWRDbGFzcyA9IG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyByZWZyZXNoRGF0YSgpIHsKICAgICAgLy8g5a6e6ZmF5bqU55So5Lit5LuO5ZCO56uv5Yi35paw5pWw5o2uCiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hDbGFzc0luZm8oKTsKICAgIH0KICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAvLyDojrflj5bnj63nuqfkv6Hmga8KICAgIGF3YWl0IHRoaXMuZmV0Y2hDbGFzc0luZm8oKTsKICB9Cn07"},{"version":3,"names":["mapGetters","mapActions","name","data","search","classDialog","deleteDialog","selectedClass","headers","text","value","sortable","editedIndex","editedItem","id","teacher","description","student_count","defaultItem","isFormValid","sampleClasses","stats","normal","late","absent","computed","formTitle","classes","methods","calcPercentage","total","toFixed","viewClass","item","openNewClassDialog","Object","assign","editClass","indexOf","deleteClass","closeClassDialog","$nextTick","saveClass","length","push","confirmDelete","splice","refreshData","fetchClassInfo","mounted"],"sources":["src/views/Classes.vue"],"sourcesContent":["<template>\r\n  <div class=\"classes\">\r\n    <v-row>\r\n      <v-col cols=\"12\" md=\"7\">\r\n        <v-card elevation=\"2\">\r\n          <v-card-title class=\"headline\">\r\n            <v-icon left>mdi-account-group</v-icon>\r\n            班级管理\r\n            <v-spacer></v-spacer>\r\n            <v-text-field\r\n              v-model=\"search\"\r\n              append-icon=\"mdi-magnify\"\r\n              label=\"搜索\"\r\n              single-line\r\n              hide-details\r\n              class=\"ml-2\"\r\n              style=\"max-width: 300px;\"\r\n            ></v-text-field>\r\n          </v-card-title>\r\n          \r\n          <v-data-table\r\n            :headers=\"headers\"\r\n            :items=\"classes\"\r\n            :search=\"search\"\r\n            :loading=\"isLoading\"\r\n            :items-per-page=\"10\"\r\n            class=\"elevation-1\"\r\n          >\r\n            <template v-slot:top>\r\n              <v-toolbar flat>\r\n                <v-toolbar-title>班级列表</v-toolbar-title>\r\n                <v-divider class=\"mx-4\" inset vertical></v-divider>\r\n                <v-spacer></v-spacer>\r\n                <v-btn color=\"primary\" @click=\"refreshData\">\r\n                  <v-icon left>mdi-refresh</v-icon>\r\n                  刷新\r\n                </v-btn>\r\n                <v-btn color=\"success\" class=\"ml-2\" @click=\"openNewClassDialog\">\r\n                  <v-icon left>mdi-plus</v-icon>\r\n                  新增班级\r\n                </v-btn>\r\n              </v-toolbar>\r\n            </template>\r\n            \r\n            <!-- 班级名称列 -->\r\n            <template v-slot:item.name=\"{ item }\">\r\n              <strong>{{ item.name }}</strong>\r\n            </template>\r\n            \r\n            <!-- 学生数量列 -->\r\n            <template v-slot:item.student_count=\"{ item }\">\r\n              <v-chip color=\"primary\" small>{{ item.student_count || 0 }}</v-chip>\r\n            </template>\r\n            \r\n            <!-- 操作列 -->\r\n            <template v-slot:item.actions=\"{ item }\">\r\n              <v-icon small class=\"mr-2\" @click=\"viewClass(item)\">\r\n                mdi-eye\r\n              </v-icon>\r\n              <v-icon small class=\"mr-2\" @click=\"editClass(item)\">\r\n                mdi-pencil\r\n              </v-icon>\r\n              <v-icon small @click=\"deleteClass(item)\">\r\n                mdi-delete\r\n              </v-icon>\r\n            </template>\r\n            \r\n            <!-- 没有数据时显示 -->\r\n            <template v-slot:no-data>\r\n              <v-alert type=\"info\" outlined>\r\n                暂无班级数据，请添加班级。\r\n              </v-alert>\r\n            </template>\r\n          </v-data-table>\r\n        </v-card>\r\n      </v-col>\r\n      \r\n      <v-col cols=\"12\" md=\"5\">\r\n        <v-card v-if=\"selectedClass\" elevation=\"2\">\r\n          <v-card-title class=\"headline\">\r\n            <v-icon left>mdi-account-group</v-icon>\r\n            {{ selectedClass.name }} - 详情\r\n          </v-card-title>\r\n          \r\n          <v-card-text>\r\n            <v-list dense>\r\n              <v-list-item>\r\n                <v-list-item-content>\r\n                  <v-list-item-title>班级ID</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.id }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n              \r\n              <v-list-item>\r\n                <v-list-item-content>\r\n                  <v-list-item-title>班级名称</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.name }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n              \r\n              <v-list-item>\r\n                <v-list-item-content>\r\n                  <v-list-item-title>学生数量</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.student_count || 0 }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n              \r\n              <v-list-item v-if=\"selectedClass.teacher\">\r\n                <v-list-item-content>\r\n                  <v-list-item-title>班主任</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.teacher }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n              \r\n              <v-list-item v-if=\"selectedClass.description\">\r\n                <v-list-item-content>\r\n                  <v-list-item-title>描述</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.description }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n            </v-list>\r\n            \r\n            <v-divider class=\"my-4\"></v-divider>\r\n            \r\n            <h3 class=\"mb-2\">最近考勤统计</h3>\r\n            <v-simple-table dense>\r\n              <template v-slot:default>\r\n                <thead>\r\n                  <tr>\r\n                    <th>状态</th>\r\n                    <th>人数</th>\r\n                    <th>比例</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>正常</td>\r\n                    <td>{{ selectedClass.stats?.normal || 0 }}</td>\r\n                    <td>{{ calcPercentage(selectedClass.stats?.normal, selectedClass.student_count) }}%</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>迟到</td>\r\n                    <td>{{ selectedClass.stats?.late || 0 }}</td>\r\n                    <td>{{ calcPercentage(selectedClass.stats?.late, selectedClass.student_count) }}%</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>缺勤</td>\r\n                    <td>{{ selectedClass.stats?.absent || 0 }}</td>\r\n                    <td>{{ calcPercentage(selectedClass.stats?.absent, selectedClass.student_count) }}%</td>\r\n                  </tr>\r\n                </tbody>\r\n              </template>\r\n            </v-simple-table>\r\n          </v-card-text>\r\n          \r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"editClass(selectedClass)\">\r\n              <v-icon left>mdi-pencil</v-icon>\r\n              编辑\r\n            </v-btn>\r\n            <v-btn color=\"error\" text @click=\"deleteClass(selectedClass)\">\r\n              <v-icon left>mdi-delete</v-icon>\r\n              删除\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n        \r\n        <v-card v-else elevation=\"2\">\r\n          <v-card-title class=\"headline\">\r\n            <v-icon left>mdi-information-outline</v-icon>\r\n            班级管理说明\r\n          </v-card-title>\r\n          \r\n          <v-card-text>\r\n            <p>点击左侧班级查看详细信息。</p>\r\n            <p>您可以添加、编辑和删除班级信息。</p>\r\n            <p>班级信息将用于学生注册和考勤分析。</p>\r\n          </v-card-text>\r\n          \r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" @click=\"openNewClassDialog\">\r\n              <v-icon left>mdi-plus</v-icon>\r\n              添加班级\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n    \r\n    <!-- 新增/编辑班级对话框 -->\r\n    <v-dialog v-model=\"classDialog\" max-width=\"500px\">\r\n      <v-card>\r\n        <v-card-title>\r\n          <span class=\"headline\">{{ formTitle }}</span>\r\n        </v-card-title>\r\n        \r\n        <v-card-text>\r\n          <v-form ref=\"form\" v-model=\"isFormValid\">\r\n            <v-container>\r\n              <v-row>\r\n                <v-col cols=\"12\">\r\n                  <v-text-field\r\n                    v-model=\"editedItem.name\"\r\n                    label=\"班级名称\"\r\n                    required\r\n                    :rules=\"[v => !!v || '请输入班级名称']\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n                \r\n                <v-col cols=\"12\">\r\n                  <v-text-field\r\n                    v-model=\"editedItem.teacher\"\r\n                    label=\"班主任\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n                \r\n                <v-col cols=\"12\">\r\n                  <v-textarea\r\n                    v-model=\"editedItem.description\"\r\n                    label=\"描述\"\r\n                    rows=\"3\"\r\n                  ></v-textarea>\r\n                </v-col>\r\n              </v-row>\r\n            </v-container>\r\n          </v-form>\r\n        </v-card-text>\r\n        \r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"error\" text @click=\"closeClassDialog\">取消</v-btn>\r\n          <v-btn color=\"success\" text @click=\"saveClass\" :disabled=\"!isFormValid\">保存</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    \r\n    <!-- 删除确认对话框 -->\r\n    <v-dialog v-model=\"deleteDialog\" max-width=\"500px\">\r\n      <v-card>\r\n        <v-card-title class=\"headline\">确认删除</v-card-title>\r\n        <v-card-text>确定要删除班级 \"{{ editedItem.name }}\" 吗？此操作不可撤销。</v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"primary\" text @click=\"deleteDialog = false\">取消</v-btn>\r\n          <v-btn color=\"error\" text @click=\"confirmDelete\">确认删除</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex';\r\n\r\nexport default {\r\n  name: 'Classes',\r\n  data: () => ({\r\n    search: '',\r\n    classDialog: false,\r\n    deleteDialog: false,\r\n    selectedClass: null,\r\n    headers: [\r\n      { text: '班级ID', value: 'id', sortable: true },\r\n      { text: '班级名称', value: 'name', sortable: true },\r\n      { text: '学生数量', value: 'student_count', sortable: true },\r\n      { text: '班主任', value: 'teacher', sortable: true },\r\n      { text: '操作', value: 'actions', sortable: false }\r\n    ],\r\n    editedIndex: -1,\r\n    editedItem: {\r\n      id: '',\r\n      name: '',\r\n      teacher: '',\r\n      description: '',\r\n      student_count: 0\r\n    },\r\n    defaultItem: {\r\n      id: '',\r\n      name: '',\r\n      teacher: '',\r\n      description: '',\r\n      student_count: 0\r\n    },\r\n    isFormValid: false,\r\n    // 示例数据 - 实际应用中应从后端获取\r\n    sampleClasses: [\r\n      {\r\n        id: 'class1',\r\n        name: '计算机科学与技术1班',\r\n        teacher: '张教授',\r\n        description: '本科2021级计算机科学与技术1班',\r\n        student_count: 45,\r\n        stats: { normal: 40, late: 3, absent: 2 }\r\n      },\r\n      {\r\n        id: 'class2',\r\n        name: '计算机科学与技术2班',\r\n        teacher: '李教授',\r\n        description: '本科2021级计算机科学与技术2班',\r\n        student_count: 42,\r\n        stats: { normal: 38, late: 2, absent: 2 }\r\n      },\r\n      {\r\n        id: 'class3',\r\n        name: '软件工程1班',\r\n        teacher: '王教授',\r\n        description: '本科2021级软件工程1班',\r\n        student_count: 48,\r\n        stats: { normal: 45, late: 2, absent: 1 }\r\n      }\r\n    ]\r\n  }),\r\n  computed: {\r\n    ...mapGetters([\r\n      'classInfo',\r\n      'isLoading',\r\n      'error'\r\n    ]),\r\n    formTitle () {\r\n      return this.editedIndex === -1 ? '新增班级' : '编辑班级'\r\n    },\r\n    classes() {\r\n      // 实际应用中应该使用从后端获取的数据\r\n      // return this.classInfo.classes || []\r\n      return this.sampleClasses\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'fetchClassInfo'\r\n    ]),\r\n    \r\n    calcPercentage(value, total) {\r\n      if (!value || !total) return 0\r\n      return ((value / total) * 100).toFixed(1)\r\n    },\r\n    \r\n    viewClass(item) {\r\n      this.selectedClass = item\r\n    },\r\n    \r\n    openNewClassDialog() {\r\n      this.editedIndex = -1\r\n      this.editedItem = Object.assign({}, this.defaultItem)\r\n      this.classDialog = true\r\n    },\r\n    \r\n    editClass(item) {\r\n      this.editedIndex = this.classes.indexOf(item)\r\n      this.editedItem = Object.assign({}, item)\r\n      this.classDialog = true\r\n    },\r\n    \r\n    deleteClass(item) {\r\n      this.editedIndex = this.classes.indexOf(item)\r\n      this.editedItem = Object.assign({}, item)\r\n      this.deleteDialog = true\r\n    },\r\n    \r\n    closeClassDialog() {\r\n      this.classDialog = false\r\n      this.$nextTick(() => {\r\n        this.editedItem = Object.assign({}, this.defaultItem)\r\n        this.editedIndex = -1\r\n      })\r\n    },\r\n    \r\n    saveClass() {\r\n      if (this.editedIndex > -1) {\r\n        // 更新现有班级\r\n        Object.assign(this.classes[this.editedIndex], this.editedItem)\r\n      } else {\r\n        // 添加新班级\r\n        this.editedItem.id = 'class' + (this.classes.length + 1) // 简单生成ID\r\n        this.editedItem.student_count = 0 // 初始学生数为0\r\n        this.sampleClasses.push(this.editedItem)\r\n      }\r\n      this.closeClassDialog()\r\n    },\r\n    \r\n    confirmDelete() {\r\n      this.sampleClasses.splice(this.editedIndex, 1)\r\n      this.deleteDialog = false\r\n      if (this.selectedClass && this.selectedClass.id === this.editedItem.id) {\r\n        this.selectedClass = null\r\n      }\r\n    },\r\n    \r\n    async refreshData() {\r\n      // 实际应用中从后端刷新数据\r\n      await this.fetchClassInfo()\r\n    }\r\n  },\r\n  async mounted() {\r\n    // 获取班级信息\r\n    await this.fetchClassInfo()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.classes {\r\n  margin-bottom: 20px;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]}]}