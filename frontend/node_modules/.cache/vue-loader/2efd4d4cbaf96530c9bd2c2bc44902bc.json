{"remainingRequest":"E:\\内容安全\\final\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\内容安全\\final\\frontend\\src\\views\\Classes.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\内容安全\\final\\frontend\\src\\views\\Classes.vue","mtime":1745382006243},{"path":"E:\\内容安全\\final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745383817393},{"path":"E:\\内容安全\\final\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1745383814346},{"path":"E:\\内容安全\\final\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745383817393},{"path":"E:\\内容安全\\final\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1745383816753}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0NsYXNzZXMnLA0KICBkYXRhOiAoKSA9PiAoew0KICAgIHNlYXJjaDogJycsDQogICAgY2xhc3NEaWFsb2c6IGZhbHNlLA0KICAgIGRlbGV0ZURpYWxvZzogZmFsc2UsDQogICAgc2VsZWN0ZWRDbGFzczogbnVsbCwNCiAgICBoZWFkZXJzOiBbDQogICAgICB7IHRleHQ6ICfnj63nuqdJRCcsIHZhbHVlOiAnaWQnLCBzb3J0YWJsZTogdHJ1ZSB9LA0KICAgICAgeyB0ZXh0OiAn54+t57qn5ZCN56ewJywgdmFsdWU6ICduYW1lJywgc29ydGFibGU6IHRydWUgfSwNCiAgICAgIHsgdGV4dDogJ+WtpueUn+aVsOmHjycsIHZhbHVlOiAnc3R1ZGVudF9jb3VudCcsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICB7IHRleHQ6ICfnj63kuLvku7snLCB2YWx1ZTogJ3RlYWNoZXInLCBzb3J0YWJsZTogdHJ1ZSB9LA0KICAgICAgeyB0ZXh0OiAn5pON5L2cJywgdmFsdWU6ICdhY3Rpb25zJywgc29ydGFibGU6IGZhbHNlIH0NCiAgICBdLA0KICAgIGVkaXRlZEluZGV4OiAtMSwNCiAgICBlZGl0ZWRJdGVtOiB7DQogICAgICBpZDogJycsDQogICAgICBuYW1lOiAnJywNCiAgICAgIHRlYWNoZXI6ICcnLA0KICAgICAgZGVzY3JpcHRpb246ICcnLA0KICAgICAgc3R1ZGVudF9jb3VudDogMA0KICAgIH0sDQogICAgZGVmYXVsdEl0ZW06IHsNCiAgICAgIGlkOiAnJywNCiAgICAgIG5hbWU6ICcnLA0KICAgICAgdGVhY2hlcjogJycsDQogICAgICBkZXNjcmlwdGlvbjogJycsDQogICAgICBzdHVkZW50X2NvdW50OiAwDQogICAgfSwNCiAgICBpc0Zvcm1WYWxpZDogZmFsc2UsDQogICAgLy8g56S65L6L5pWw5o2uIC0g5a6e6ZmF5bqU55So5Lit5bqU5LuO5ZCO56uv6I635Y+WDQogICAgc2FtcGxlQ2xhc3NlczogWw0KICAgICAgew0KICAgICAgICBpZDogJ2NsYXNzMScsDQogICAgICAgIG5hbWU6ICforqHnrpfmnLrnp5HlrabkuI7mioDmnK8x54+tJywNCiAgICAgICAgdGVhY2hlcjogJ+W8oOaVmeaOiCcsDQogICAgICAgIGRlc2NyaXB0aW9uOiAn5pys56eRMjAyMee6p+iuoeeul+acuuenkeWtpuS4juaKgOacrzHnj60nLA0KICAgICAgICBzdHVkZW50X2NvdW50OiA0NSwNCiAgICAgICAgc3RhdHM6IHsgbm9ybWFsOiA0MCwgbGF0ZTogMywgYWJzZW50OiAyIH0NCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIGlkOiAnY2xhc3MyJywNCiAgICAgICAgbmFtZTogJ+iuoeeul+acuuenkeWtpuS4juaKgOacrzLnj60nLA0KICAgICAgICB0ZWFjaGVyOiAn5p2O5pWZ5o6IJywNCiAgICAgICAgZGVzY3JpcHRpb246ICfmnKznp5EyMDIx57qn6K6h566X5py656eR5a2m5LiO5oqA5pyvMuePrScsDQogICAgICAgIHN0dWRlbnRfY291bnQ6IDQyLA0KICAgICAgICBzdGF0czogeyBub3JtYWw6IDM4LCBsYXRlOiAyLCBhYnNlbnQ6IDIgfQ0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgaWQ6ICdjbGFzczMnLA0KICAgICAgICBuYW1lOiAn6L2v5Lu25bel56iLMeePrScsDQogICAgICAgIHRlYWNoZXI6ICfnjovmlZnmjognLA0KICAgICAgICBkZXNjcmlwdGlvbjogJ+acrOenkTIwMjHnuqfova/ku7blt6XnqIsx54+tJywNCiAgICAgICAgc3R1ZGVudF9jb3VudDogNDgsDQogICAgICAgIHN0YXRzOiB7IG5vcm1hbDogNDUsIGxhdGU6IDIsIGFic2VudDogMSB9DQogICAgICB9DQogICAgXQ0KICB9KSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsNCiAgICAgICdjbGFzc0luZm8nLA0KICAgICAgJ2lzTG9hZGluZycsDQogICAgICAnZXJyb3InDQogICAgXSksDQogICAgZm9ybVRpdGxlICgpIHsNCiAgICAgIHJldHVybiB0aGlzLmVkaXRlZEluZGV4ID09PSAtMSA/ICfmlrDlop7nj63nuqcnIDogJ+e8lui+keePree6pycNCiAgICB9LA0KICAgIGNsYXNzZXMoKSB7DQogICAgICAvLyDlrp7pmYXlupTnlKjkuK3lupTor6Xkvb/nlKjku47lkI7nq6/ojrflj5bnmoTmlbDmja4NCiAgICAgIC8vIHJldHVybiB0aGlzLmNsYXNzSW5mby5jbGFzc2VzIHx8IFtdDQogICAgICByZXR1cm4gdGhpcy5zYW1wbGVDbGFzc2VzDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyhbDQogICAgICAnZmV0Y2hDbGFzc0luZm8nDQogICAgXSksDQogICAgDQogICAgY2FsY1BlcmNlbnRhZ2UodmFsdWUsIHRvdGFsKSB7DQogICAgICBpZiAoIXZhbHVlIHx8ICF0b3RhbCkgcmV0dXJuIDANCiAgICAgIHJldHVybiAoKHZhbHVlIC8gdG90YWwpICogMTAwKS50b0ZpeGVkKDEpDQogICAgfSwNCiAgICANCiAgICB2aWV3Q2xhc3MoaXRlbSkgew0KICAgICAgdGhpcy5zZWxlY3RlZENsYXNzID0gaXRlbQ0KICAgIH0sDQogICAgDQogICAgb3Blbk5ld0NsYXNzRGlhbG9nKCkgew0KICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IC0xDQogICAgICB0aGlzLmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRJdGVtKQ0KICAgICAgdGhpcy5jbGFzc0RpYWxvZyA9IHRydWUNCiAgICB9LA0KICAgIA0KICAgIGVkaXRDbGFzcyhpdGVtKSB7DQogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gdGhpcy5jbGFzc2VzLmluZGV4T2YoaXRlbSkNCiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pDQogICAgICB0aGlzLmNsYXNzRGlhbG9nID0gdHJ1ZQ0KICAgIH0sDQogICAgDQogICAgZGVsZXRlQ2xhc3MoaXRlbSkgew0KICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IHRoaXMuY2xhc3Nlcy5pbmRleE9mKGl0ZW0pDQogICAgICB0aGlzLmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKQ0KICAgICAgdGhpcy5kZWxldGVEaWFsb2cgPSB0cnVlDQogICAgfSwNCiAgICANCiAgICBjbG9zZUNsYXNzRGlhbG9nKCkgew0KICAgICAgdGhpcy5jbGFzc0RpYWxvZyA9IGZhbHNlDQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEl0ZW0pDQogICAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSAtMQ0KICAgICAgfSkNCiAgICB9LA0KICAgIA0KICAgIHNhdmVDbGFzcygpIHsNCiAgICAgIGlmICh0aGlzLmVkaXRlZEluZGV4ID4gLTEpIHsNCiAgICAgICAgLy8g5pu05paw546w5pyJ54+t57qnDQogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jbGFzc2VzW3RoaXMuZWRpdGVkSW5kZXhdLCB0aGlzLmVkaXRlZEl0ZW0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyDmt7vliqDmlrDnj63nuqcNCiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtLmlkID0gJ2NsYXNzJyArICh0aGlzLmNsYXNzZXMubGVuZ3RoICsgMSkgLy8g566A5Y2V55Sf5oiQSUQNCiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtLnN0dWRlbnRfY291bnQgPSAwIC8vIOWIneWni+WtpueUn+aVsOS4ujANCiAgICAgICAgdGhpcy5zYW1wbGVDbGFzc2VzLnB1c2godGhpcy5lZGl0ZWRJdGVtKQ0KICAgICAgfQ0KICAgICAgdGhpcy5jbG9zZUNsYXNzRGlhbG9nKCkNCiAgICB9LA0KICAgIA0KICAgIGNvbmZpcm1EZWxldGUoKSB7DQogICAgICB0aGlzLnNhbXBsZUNsYXNzZXMuc3BsaWNlKHRoaXMuZWRpdGVkSW5kZXgsIDEpDQogICAgICB0aGlzLmRlbGV0ZURpYWxvZyA9IGZhbHNlDQogICAgICBpZiAodGhpcy5zZWxlY3RlZENsYXNzICYmIHRoaXMuc2VsZWN0ZWRDbGFzcy5pZCA9PT0gdGhpcy5lZGl0ZWRJdGVtLmlkKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRDbGFzcyA9IG51bGwNCiAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGFzeW5jIHJlZnJlc2hEYXRhKCkgew0KICAgICAgLy8g5a6e6ZmF5bqU55So5Lit5LuO5ZCO56uv5Yi35paw5pWw5o2uDQogICAgICBhd2FpdCB0aGlzLmZldGNoQ2xhc3NJbmZvKCkNCiAgICB9DQogIH0sDQogIGFzeW5jIG1vdW50ZWQoKSB7DQogICAgLy8g6I635Y+W54+t57qn5L+h5oGvDQogICAgYXdhaXQgdGhpcy5mZXRjaENsYXNzSW5mbygpDQogIH0NCn0NCg=="},{"version":3,"sources":["Classes.vue"],"names":[],"mappings":";AA8PA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Classes.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"classes\">\r\n    <v-row>\r\n      <v-col cols=\"12\" md=\"7\">\r\n        <v-card elevation=\"2\">\r\n          <v-card-title class=\"headline\">\r\n            <v-icon left>mdi-account-group</v-icon>\r\n            班级管理\r\n            <v-spacer></v-spacer>\r\n            <v-text-field\r\n              v-model=\"search\"\r\n              append-icon=\"mdi-magnify\"\r\n              label=\"搜索\"\r\n              single-line\r\n              hide-details\r\n              class=\"ml-2\"\r\n              style=\"max-width: 300px;\"\r\n            ></v-text-field>\r\n          </v-card-title>\r\n          \r\n          <v-data-table\r\n            :headers=\"headers\"\r\n            :items=\"classes\"\r\n            :search=\"search\"\r\n            :loading=\"isLoading\"\r\n            :items-per-page=\"10\"\r\n            class=\"elevation-1\"\r\n          >\r\n            <template v-slot:top>\r\n              <v-toolbar flat>\r\n                <v-toolbar-title>班级列表</v-toolbar-title>\r\n                <v-divider class=\"mx-4\" inset vertical></v-divider>\r\n                <v-spacer></v-spacer>\r\n                <v-btn color=\"primary\" @click=\"refreshData\">\r\n                  <v-icon left>mdi-refresh</v-icon>\r\n                  刷新\r\n                </v-btn>\r\n                <v-btn color=\"success\" class=\"ml-2\" @click=\"openNewClassDialog\">\r\n                  <v-icon left>mdi-plus</v-icon>\r\n                  新增班级\r\n                </v-btn>\r\n              </v-toolbar>\r\n            </template>\r\n            \r\n            <!-- 班级名称列 -->\r\n            <template v-slot:item.name=\"{ item }\">\r\n              <strong>{{ item.name }}</strong>\r\n            </template>\r\n            \r\n            <!-- 学生数量列 -->\r\n            <template v-slot:item.student_count=\"{ item }\">\r\n              <v-chip color=\"primary\" small>{{ item.student_count || 0 }}</v-chip>\r\n            </template>\r\n            \r\n            <!-- 操作列 -->\r\n            <template v-slot:item.actions=\"{ item }\">\r\n              <v-icon small class=\"mr-2\" @click=\"viewClass(item)\">\r\n                mdi-eye\r\n              </v-icon>\r\n              <v-icon small class=\"mr-2\" @click=\"editClass(item)\">\r\n                mdi-pencil\r\n              </v-icon>\r\n              <v-icon small @click=\"deleteClass(item)\">\r\n                mdi-delete\r\n              </v-icon>\r\n            </template>\r\n            \r\n            <!-- 没有数据时显示 -->\r\n            <template v-slot:no-data>\r\n              <v-alert type=\"info\" outlined>\r\n                暂无班级数据，请添加班级。\r\n              </v-alert>\r\n            </template>\r\n          </v-data-table>\r\n        </v-card>\r\n      </v-col>\r\n      \r\n      <v-col cols=\"12\" md=\"5\">\r\n        <v-card v-if=\"selectedClass\" elevation=\"2\">\r\n          <v-card-title class=\"headline\">\r\n            <v-icon left>mdi-account-group</v-icon>\r\n            {{ selectedClass.name }} - 详情\r\n          </v-card-title>\r\n          \r\n          <v-card-text>\r\n            <v-list dense>\r\n              <v-list-item>\r\n                <v-list-item-content>\r\n                  <v-list-item-title>班级ID</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.id }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n              \r\n              <v-list-item>\r\n                <v-list-item-content>\r\n                  <v-list-item-title>班级名称</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.name }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n              \r\n              <v-list-item>\r\n                <v-list-item-content>\r\n                  <v-list-item-title>学生数量</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.student_count || 0 }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n              \r\n              <v-list-item v-if=\"selectedClass.teacher\">\r\n                <v-list-item-content>\r\n                  <v-list-item-title>班主任</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.teacher }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n              \r\n              <v-list-item v-if=\"selectedClass.description\">\r\n                <v-list-item-content>\r\n                  <v-list-item-title>描述</v-list-item-title>\r\n                  <v-list-item-subtitle>{{ selectedClass.description }}</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n            </v-list>\r\n            \r\n            <v-divider class=\"my-4\"></v-divider>\r\n            \r\n            <h3 class=\"mb-2\">最近考勤统计</h3>\r\n            <v-simple-table dense>\r\n              <template v-slot:default>\r\n                <thead>\r\n                  <tr>\r\n                    <th>状态</th>\r\n                    <th>人数</th>\r\n                    <th>比例</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>正常</td>\r\n                    <td>{{ selectedClass.stats?.normal || 0 }}</td>\r\n                    <td>{{ calcPercentage(selectedClass.stats?.normal, selectedClass.student_count) }}%</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>迟到</td>\r\n                    <td>{{ selectedClass.stats?.late || 0 }}</td>\r\n                    <td>{{ calcPercentage(selectedClass.stats?.late, selectedClass.student_count) }}%</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>缺勤</td>\r\n                    <td>{{ selectedClass.stats?.absent || 0 }}</td>\r\n                    <td>{{ calcPercentage(selectedClass.stats?.absent, selectedClass.student_count) }}%</td>\r\n                  </tr>\r\n                </tbody>\r\n              </template>\r\n            </v-simple-table>\r\n          </v-card-text>\r\n          \r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"editClass(selectedClass)\">\r\n              <v-icon left>mdi-pencil</v-icon>\r\n              编辑\r\n            </v-btn>\r\n            <v-btn color=\"error\" text @click=\"deleteClass(selectedClass)\">\r\n              <v-icon left>mdi-delete</v-icon>\r\n              删除\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n        \r\n        <v-card v-else elevation=\"2\">\r\n          <v-card-title class=\"headline\">\r\n            <v-icon left>mdi-information-outline</v-icon>\r\n            班级管理说明\r\n          </v-card-title>\r\n          \r\n          <v-card-text>\r\n            <p>点击左侧班级查看详细信息。</p>\r\n            <p>您可以添加、编辑和删除班级信息。</p>\r\n            <p>班级信息将用于学生注册和考勤分析。</p>\r\n          </v-card-text>\r\n          \r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" @click=\"openNewClassDialog\">\r\n              <v-icon left>mdi-plus</v-icon>\r\n              添加班级\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n    \r\n    <!-- 新增/编辑班级对话框 -->\r\n    <v-dialog v-model=\"classDialog\" max-width=\"500px\">\r\n      <v-card>\r\n        <v-card-title>\r\n          <span class=\"headline\">{{ formTitle }}</span>\r\n        </v-card-title>\r\n        \r\n        <v-card-text>\r\n          <v-form ref=\"form\" v-model=\"isFormValid\">\r\n            <v-container>\r\n              <v-row>\r\n                <v-col cols=\"12\">\r\n                  <v-text-field\r\n                    v-model=\"editedItem.name\"\r\n                    label=\"班级名称\"\r\n                    required\r\n                    :rules=\"[v => !!v || '请输入班级名称']\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n                \r\n                <v-col cols=\"12\">\r\n                  <v-text-field\r\n                    v-model=\"editedItem.teacher\"\r\n                    label=\"班主任\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n                \r\n                <v-col cols=\"12\">\r\n                  <v-textarea\r\n                    v-model=\"editedItem.description\"\r\n                    label=\"描述\"\r\n                    rows=\"3\"\r\n                  ></v-textarea>\r\n                </v-col>\r\n              </v-row>\r\n            </v-container>\r\n          </v-form>\r\n        </v-card-text>\r\n        \r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"error\" text @click=\"closeClassDialog\">取消</v-btn>\r\n          <v-btn color=\"success\" text @click=\"saveClass\" :disabled=\"!isFormValid\">保存</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    \r\n    <!-- 删除确认对话框 -->\r\n    <v-dialog v-model=\"deleteDialog\" max-width=\"500px\">\r\n      <v-card>\r\n        <v-card-title class=\"headline\">确认删除</v-card-title>\r\n        <v-card-text>确定要删除班级 \"{{ editedItem.name }}\" 吗？此操作不可撤销。</v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"primary\" text @click=\"deleteDialog = false\">取消</v-btn>\r\n          <v-btn color=\"error\" text @click=\"confirmDelete\">确认删除</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex';\r\n\r\nexport default {\r\n  name: 'Classes',\r\n  data: () => ({\r\n    search: '',\r\n    classDialog: false,\r\n    deleteDialog: false,\r\n    selectedClass: null,\r\n    headers: [\r\n      { text: '班级ID', value: 'id', sortable: true },\r\n      { text: '班级名称', value: 'name', sortable: true },\r\n      { text: '学生数量', value: 'student_count', sortable: true },\r\n      { text: '班主任', value: 'teacher', sortable: true },\r\n      { text: '操作', value: 'actions', sortable: false }\r\n    ],\r\n    editedIndex: -1,\r\n    editedItem: {\r\n      id: '',\r\n      name: '',\r\n      teacher: '',\r\n      description: '',\r\n      student_count: 0\r\n    },\r\n    defaultItem: {\r\n      id: '',\r\n      name: '',\r\n      teacher: '',\r\n      description: '',\r\n      student_count: 0\r\n    },\r\n    isFormValid: false,\r\n    // 示例数据 - 实际应用中应从后端获取\r\n    sampleClasses: [\r\n      {\r\n        id: 'class1',\r\n        name: '计算机科学与技术1班',\r\n        teacher: '张教授',\r\n        description: '本科2021级计算机科学与技术1班',\r\n        student_count: 45,\r\n        stats: { normal: 40, late: 3, absent: 2 }\r\n      },\r\n      {\r\n        id: 'class2',\r\n        name: '计算机科学与技术2班',\r\n        teacher: '李教授',\r\n        description: '本科2021级计算机科学与技术2班',\r\n        student_count: 42,\r\n        stats: { normal: 38, late: 2, absent: 2 }\r\n      },\r\n      {\r\n        id: 'class3',\r\n        name: '软件工程1班',\r\n        teacher: '王教授',\r\n        description: '本科2021级软件工程1班',\r\n        student_count: 48,\r\n        stats: { normal: 45, late: 2, absent: 1 }\r\n      }\r\n    ]\r\n  }),\r\n  computed: {\r\n    ...mapGetters([\r\n      'classInfo',\r\n      'isLoading',\r\n      'error'\r\n    ]),\r\n    formTitle () {\r\n      return this.editedIndex === -1 ? '新增班级' : '编辑班级'\r\n    },\r\n    classes() {\r\n      // 实际应用中应该使用从后端获取的数据\r\n      // return this.classInfo.classes || []\r\n      return this.sampleClasses\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'fetchClassInfo'\r\n    ]),\r\n    \r\n    calcPercentage(value, total) {\r\n      if (!value || !total) return 0\r\n      return ((value / total) * 100).toFixed(1)\r\n    },\r\n    \r\n    viewClass(item) {\r\n      this.selectedClass = item\r\n    },\r\n    \r\n    openNewClassDialog() {\r\n      this.editedIndex = -1\r\n      this.editedItem = Object.assign({}, this.defaultItem)\r\n      this.classDialog = true\r\n    },\r\n    \r\n    editClass(item) {\r\n      this.editedIndex = this.classes.indexOf(item)\r\n      this.editedItem = Object.assign({}, item)\r\n      this.classDialog = true\r\n    },\r\n    \r\n    deleteClass(item) {\r\n      this.editedIndex = this.classes.indexOf(item)\r\n      this.editedItem = Object.assign({}, item)\r\n      this.deleteDialog = true\r\n    },\r\n    \r\n    closeClassDialog() {\r\n      this.classDialog = false\r\n      this.$nextTick(() => {\r\n        this.editedItem = Object.assign({}, this.defaultItem)\r\n        this.editedIndex = -1\r\n      })\r\n    },\r\n    \r\n    saveClass() {\r\n      if (this.editedIndex > -1) {\r\n        // 更新现有班级\r\n        Object.assign(this.classes[this.editedIndex], this.editedItem)\r\n      } else {\r\n        // 添加新班级\r\n        this.editedItem.id = 'class' + (this.classes.length + 1) // 简单生成ID\r\n        this.editedItem.student_count = 0 // 初始学生数为0\r\n        this.sampleClasses.push(this.editedItem)\r\n      }\r\n      this.closeClassDialog()\r\n    },\r\n    \r\n    confirmDelete() {\r\n      this.sampleClasses.splice(this.editedIndex, 1)\r\n      this.deleteDialog = false\r\n      if (this.selectedClass && this.selectedClass.id === this.editedItem.id) {\r\n        this.selectedClass = null\r\n      }\r\n    },\r\n    \r\n    async refreshData() {\r\n      // 实际应用中从后端刷新数据\r\n      await this.fetchClassInfo()\r\n    }\r\n  },\r\n  async mounted() {\r\n    // 获取班级信息\r\n    await this.fetchClassInfo()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.classes {\r\n  margin-bottom: 20px;\r\n}\r\n</style> "]}]}