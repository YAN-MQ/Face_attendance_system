# 人脸识别考勤系统

## 项目简介

本项目是一个基于人脸识别与活体检测技术的班级考勤系统，旨在通过先进的技术手段实现高效、准确的学生考勤管理。系统集成了多种活体检测方案，能够有效防止照片和视频攻击，确保考勤数据的真实性和可靠性。

## 功能特性

- **人脸识别考勤**：使用摄像头进行人脸识别，支持多种活体检测方式，快速准确完成考勤
- **人脸注册**：为新学生注册人脸信息，支持单个注册和Excel批量导入
- **考勤记录管理**：查看、筛选和导出考勤记录，方便班级管理和数据分析
- **班级管理**：维护班级信息，为学生分配班级
- **多种活体检测**：提供眨眼检测、深度学习、多模态融合等多种活体检测方法

## 技术栈

### 前端
- **框架**：Vue.js 2.x
- **UI组件库**：Vuetify 2.x
- **状态管理**：Vuex
- **路由**：Vue Router
- **HTTP请求**：Axios
- **数据导出**：xlsx.js

### 后端
- **框架**：Python Flask
- **数据库**：SQLAlchemy ORM
- **人脸识别**：dlib, face_recognition
- **计算机视觉**：OpenCV
- **深度学习**：TensorFlow/Keras

## 活体检测方法

系统提供四种活体检测方法：

1. **眨眼检测**：通过检测用户的眨眼动作确认活体，使用dlib的人脸关键点检测和自定义的眼部长宽比分析算法实现
2. **深度学习**：使用卷积神经网络分析图像纹理特征，区分真实人脸和照片/屏幕
3. **改进多模态**：综合多种特征（眨眼、纹理、深度等）的融合分析，提供更高安全性
4. **第三方API**：可选接入云服务商提供的活体检测API，适用于高安全性场景

## 安装步骤

### 环境要求
- Python 3.8+
- Node.js 14+
- npm 6+

### 后端安装
1. 安装Python依赖：
   ```bash
   cd backend
   pip install -r requirements.txt
   ```

2. 准备人脸识别模型：
   ```bash
   # 确保models目录存在
   mkdir -p models
   # 下载dlib人脸关键点模型（如果尚未下载）
   # 将shape_predictor_68_face_landmarks.dat放入models目录
   ```

3. 启动后端服务器：
   ```bash
   python app.py
   ```

### 前端安装
1. 安装依赖：
   ```bash
   cd frontend
   npm install
   ```

2. 启动开发服务器：
   ```bash
   npm run serve
   ```

3. 打包生产环境：
   ```bash
   npm run build
   ```

## 使用方法

### 考勤打卡
1. 进入"考勤打卡"页面
2. 点击"启动摄像头"按钮
3. 选择合适的活体检测方法（推荐使用"眨眼检测"或"改进多模态"）
4. 正对摄像头，点击"考勤打卡"按钮
5. 系统会自动进行活体检测和人脸识别，显示结果

### 人脸注册
1. 进入"人脸注册"页面
2. 单个注册：
   - 启动摄像头并拍照
   - 填写学生信息
   - 点击"保存注册信息"
3. 批量导入：
   - 下载Excel模板
   - 填写学生信息和照片路径
   - 上传Excel文件并点击"开始导入"

### 考勤记录
1. 进入"考勤记录"页面
2. 可按班级、姓名等条件筛选
3. 点击"导出Excel"按钮导出考勤记录
4. 点击记录右侧的查看按钮可查看详细信息

## 常见问题

### 活体检测调整
- 如果眨眼检测不够灵敏，可在`backend/models/blink_detection.py`中调整参数
- 眨眼检测参数说明：
  - `EYE_AR_THRESH`：眼睛长宽比阈值，降低此值使检测更严格
  - `EYE_AR_CONSEC_FRAMES`：连续检测帧数，减少此值使检测更容易触发

### 数据库
- 系统使用MySQL数据库
- 首次运行会自动创建所需的表结构

## 贡献者

欢迎对本项目提出建议或贡献代码。请在提交PR前确保代码风格一致，并附上详细的提交信息。

## 许可证

本项目采用MIT许可证，详情请参阅LICENSE文件。
